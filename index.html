<!DOCTYPE html>
<html lang="en">
<head>
	<base target="_top">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>The Lost Synagogues of Detroit</title>

	<!-- Load jQuery and PapaParse to read data from a CSV file -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>

	<style>

	</style>


</head>
<body>

<div id="center-div">
	<div class="center body-width"><h1> The Lost Synagogues of Detroit</h1></div>
	<div class="center body-width" id="map" style="height: 400px;"></div>
	<div class="center body-width">
		<p>
			Welcome to the interactive map showcasing the rich history of Detroit's North End neighborhood! This application has been meticulously crafted to bring you a dynamic experience, displaying historical items from the area in an engaging and interactive format.
<br /><br />
Our project draws its data from a .csv file and utilizes the powerful Leaflet.js library to create an interactive map. We are proud to acknowledge our primary data source, Shtetlhood, which provided us with valuable insights into the historical Jewish presence in the neighborhood.
<br /><br />
The inspiration for this project arose when I, the creator, moved to Detroit's North End in the fall of 2019. Intrigued by the area's vibrant history, I discovered that the neighborhood once thrived with a significant Jewish community during the 1930s and 40s. Over the years, the demographics shifted, and today, only a few traces of this historical heritage remain. For instance, the Alpha and Omega Church, originally known as Congregation Ahavath Zion, stands as a testament to the transformation of these historical spaces.
<br /><br />
Driven by a passion for preserving and sharing this rich cultural heritage, I embarked on a journey to improve upon the existing static map of the neighborhood. The result is this dynamic and interactive web application, which allows you to explore the historical landmarks, synagogues, and community centers that once flourished here.
<br /><br />
As you delve into the map, you can navigate through the neighborhood's history, clicking on each item to reveal fascinating details and stories. We hope this interactive experience provides you with a deeper understanding of Detroit's North End and its vibrant past.
<br /><br />
We are grateful to Shtetlhood for being the foundation of this project and for enabling us to create an immersive journey into the past. Our team has put their heart and soul into crafting this interactive map, and we hope you enjoy exploring the history and legacy of the North End neighborhood through this unique digital experience.
<br /><br />
Join us on this enlightening adventure as we bring history to life, one click at a time. Let's celebrate the heritage of Detroit's North End together!
<br /><br />
		</p>
	</div>
</div>

<script>
	const shulGroup = L.layerGroup();
	const institutionGroup = L.layerGroup();

	// read data from csv
	$.get('data.csv', function(csvString){
		// use PapaParse to convert string to array of objects
		var data = Papa.parse(csvString, {header:true, dynamicTyping: true}).data;

		//for each row, create a market and add it to the map
		for (var i in data) {
			var row = data[i];

			let popupContent = row.Page_name + "<br />" + row.Page_address + "<br /><a href=\"" + row.Page_link + "\" target=\"_blank\">More info</a>"

			var marker = L.marker([row.latitude, row.longitude],{
				opacity: 1
			}).bindPopup(popupContent);
			//marker.addTo(map);

			if(row.Type == "shul") {
				marker.addTo(shulGroup);
			} else {
				marker.addTo(institutionGroup);
			}
		}
	});

	//store the OSM tile layer as a variable for later
	const osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{
		maxZoom: 19,
		attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
	});

	//create the map
	const map = L.map('map',{
		center: [42.387, -83.109],
		zoom: 11,
		layers: [osm, shulGroup, institutionGroup]
	});

	const overlayMaps = {
		"Shuls": shulGroup,
		"Institutions": institutionGroup
	};

	const layerControl = L.control.layers(null, overlayMaps).addTo(map);

</script>


</body>
</html>
